<!-- 디플로이먼트의 롤링 업데이트 설정 -->
# 디플로이먼트는 두 가지 업데이트 전략을 지원한다.
# 한 가지는 지금까지 했던 롤링 업데이트고, 다른 하나는 리크리에이트(recreate)다.
# 롤링 업데이트는 앞서 보았듯이 레플리카셋의 파드 수를 차츰 줄이고, 새로운 레플리카셋의 파드 수를 늘려 나가는 식으로 된다.
# 업데이트 시간이 약간 길어지는 대신 서비스 무중단을 유지할 수 있다.

# 다만 리크리에이트 전략에서는 이런 이점을 얻을 수 없다.
# 레플리카셋을 이용하여 업데이트가 일어나는 것은 같지만, 기존 레플리카셋의 파드 수가 0까지 감소한 후 새 레플리카셋의 파드 수가 증가하기 시작한다는 점이 다르다.

<!--! 리크리에이트 전략을 왠만하면 사용하지 말자 -->
<!-- 리크리에이트 전략 -->
<!-- vweb-recreate-v2.yaml -->
apiVersion: apps/v1
kind: Deployment
metadata:
  name: vweb
  labels:
    kiamol: ch09
spec:
  replicas: 3
  selector:
    matchLabels:
      app: vweb
  strategy:               # 업데이트 전략
    type: Recreate        # 기본값인 롤링 업데이트 대신 리크리에이트 전략을 사용한다.